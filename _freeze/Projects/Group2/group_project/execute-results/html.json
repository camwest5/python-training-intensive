{
  "hash": "2999aed626ca1f01c06d86567689d583",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Queensland Fuel Price\nauthor: Nana, Jia Vei Yar, Yawen\ndate: today\n# The following are optional but recommended\nwarning: false\nimage: tb.png \nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show code\"\n    code-tools: true\n---\n\n## Introduction\n\nThis Report will focus on Fuel price by Fuel types, Suburbs and change by months\n\n- Modules that used: pandas, seaborn \n- Dataset of Queensland Fuel Price (Fuel prices by the pump in Queensland) \n- Data from Data from the Queensland Governmentâ€™s Open Data Portal\n- Investigation includes Fuel price corolation by types, date and suburbs\n\n\n\n\n## Average Fuel Prices by Fuel Types\n\n::: {#b24c4beb .cell execution_count=1}\n``` {.python .cell-code}\n# Set up code\nimport pandas as pd\ndf=pd.read_csv(\"../../data_sources/qld_fuel.csv\")\nimport seaborn as sns\nfp=df[\"Price\"]\nft=df[\"Fuel_Type\"]\nimport matplotlib.pyplot as plt\nsns.barplot(data=df, x=ft, y=fp, errorbar=None, width=0.6, palette=\"muted\")\n\nplt.xticks(rotation=45, ha='right')\n\nplt.title(\"Average Fuel Prices by Type in QLD\")\nplt.xlabel(\"Fuel Type\")\nplt.ylabel(\"Price ($/L)\")\n\nplt.tight_layout()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](group_project_files/figure-html/cell-2-output-1.png){width=662 height=470}\n:::\n:::\n\n\n## Fuel Price by Suburbs\n\n::: {#993dde9e .cell execution_count=2}\n``` {.python .cell-code}\ndf[\"TransactionDateutc\"] = pd.to_datetime(df[\"TransactionDateutc\"])\ndf[\"Price\"] = df[\"Price\"] / 100 \n\n# removing outliers \ndf = df[df[\"Price\"] < 50] \ndf = df[df[\"Price\"] > 10] \n\n# summary stats \nsummary_stats = df.groupby(\"Site_Suburb\")[\"Price\"].agg(min_price = \"min\", max_price = \"max\")\n\nsummary_stats[\"price_range\"] = summary_stats[\"max_price\"] - summary_stats[\"min_price\"]\n\n# Top 3 and bottom 3 suburbs \n\ntop3_change = summary_stats.sort_values(by=\"price_range\", ascending= False). head(3)\nbottom3_change = summary_stats.sort_values(by=\"price_range\", ascending= True). head(3)\n\nselected_suburbs = top3_change.index.tolist() + bottom3_change.index.tolist()\ndf_selected = df[df[\"Site_Suburb\"].isin(selected_suburbs)]\n\ndf_selected[\"Site_Suburb\"] = df_selected[\"Site_Suburb\"].str.strip().str.title()\n\n# Plot\nsns.catplot(data = df_selected, x = \"Site_Suburb\", y = \"Price\", kind = \"box\")\nplt.xlabel (\"Site_Suburb\")\nplt.ylabel (\"Price\")\nplt.savefig (\"tb.png\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](group_project_files/figure-html/cell-3-output-1.png){width=487 height=470}\n:::\n:::\n\n\n## Price by Time\n\n::: {#78de983a .cell execution_count=3}\n``` {.python .cell-code}\ndf.describe()\n\n# remove nulls\ndf[df[\"X_id\"].notna()]\ndf_full_X_id = df[df[\"X_id\"].notna()]\ndf_full_X_id.shape\n\n\ndf[\"Site_Suburb\"].count()\ndf[\"Site_Suburb\"].unique()\ndf[\"Site_Suburb\"].value_counts()\n\ndf[\"Fuel_Type\"].count()\ndf[\"Fuel_Type\"].unique()\ndf[\"Fuel_Type\"].value_counts()\n\n\ndf[\"TransactionDateutc\"] = pd.to_datetime(df[\"TransactionDateutc\"])\ndf[\"date_only\"] = df[\"TransactionDateutc\"].dt.date\n\n\n\n\ngb = df.groupby(\"date_only\")\navg_price_by_date = gb[\"Price\"].agg(\"mean\").reset_index()\navg_price_by_date.to_csv(\"data/avg_price_by_date.csv\")  # export subset\n\ndf[\"TransactionDateutc\"].dtypes\n\ndf[\"year_month\"] = df[\"TransactionDateutc\"].dt.to_period(\"M\")\ngb_year_month = df.groupby(\"year_month\")\navg_price_by_year_month = gb_year_month[\"Price\"].agg(\"mean\").reset_index()\navg_price_by_year_month.to_csv(\"data/avg_price_by_year_month.csv\")\nimport seaborn as sns\nimport scipy.stats as stats\nimport matplotlib.pyplot as plt\n\n\n\ntype(\"year_month\")\ntype(\"date_only\")\n\navg_price_by_year_month[\"year_month\"] = avg_price_by_year_month[\"year_month\"].dt.to_timestamp()\nsns.relplot(data = avg_price_by_date, x = \"date_only\", y = \"Price\", hue = \"Price\")\nsns.lineplot(data =avg_price_by_year_month, x = \"year_month\", y = \"Price\", color = \"red\")\n```\n\n::: {.cell-output .cell-output-display}\n![](group_project_files/figure-html/cell-4-output-1.png){width=535 height=470}\n:::\n:::\n\n\n",
    "supporting": [
      "group_project_files\\figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}